import{h as P}from"./moment-fbc5633a.js";import{_ as g,o,c as r,a as l,n as b,t as p,r as x,b as w,d,w as Q,v as J,e as R,f as T,g as L,F as f,h as z,i as A,j as F,k as C,E as O,T as Z,m as ee}from"./index-f170499a.js";import{u as y}from"./user-store-a2e7b4a2.js";const te="/assets/CoAyCuaAnhAy-BaoAnh-9430793-a9911241.mp3",ne={name:"audioTest",mounted(){this.initPlayer()},props:{id:{type:String},src:{type:String}},watch:{id(){var e;(e=this.vid)==null||e.load(),this.play=!1,this.currentTime="00:00"},src(){this.vid&&(this.vid.src=this.src)}},data(){return{play:!1,vid:"",currentTime:"00:00",duration:"00:00"}},methods:{async initPlayer(){this.vid=document.getElementById(this.id),this.vid.addEventListener("timeupdate",()=>this.onTimeUpdate()),this.vid.addEventListener("pause",()=>this.onStopped()),this.vid.addEventListener("error",()=>this.onStopped()),this.vid.addEventListener("ended",()=>this.onStopped()),this.vid.addEventListener("play",()=>this.onPlayed()),this.vid.addEventListener("loadedmetadata",()=>this.onDurationchange()),this.vid.src=this.src},onTimeUpdate(){var e;this.currentTime=P.utc((((e=this.vid)==null?void 0:e.currentTime)??0)*1e3).format("mm:ss")},onStopped(){this.play=!1},onPlayed(){this.play=!0},async onDurationchange(){var e,n;if(((e=this.vid)==null?void 0:e.duration)==1/0){await this.getDuration();return}this.duration=P().utcOffset(0).set({hour:0,minute:0,second:((n=this.vid)==null?void 0:n.duration)??0,millisecond:0}).format("mm:ss")},handlePlay(){if(this.play==!1){this.$emit("onAudioPlayed",this.id),this.vid.play();return}this.vid.pause()},async getDuration(){var e=new(window.AudioContext||window.webkitAudioContext);let t=await(await fetch(this.src)).arrayBuffer(),u=await e.decodeAudioData(t);this.duration=P().utcOffset(0).set({hour:0,minute:0,second:u.duration??0,millisecond:0}).format("mm:ss")}}},se={class:"xl:flex xl: mt-[30px] xl:items-center xl: justify-items-start xl:justify-normal lg:flex lg: justify-between"},ie={class:"pl-4 w-full h-[53px] bg-[#EAE8E8] xl:w-[234px] xl:h-[60px] xl:order-1 xl:rounded-[16px] lg:w-1/3 text-[#01518E] text-4xl rounded-4xl flex items-center"},oe={class:"ml-4"},le={class:"text-xl"},re=["id"],ae=l("source",{src:te,type:"audio/mp3",codecs:"mp3"},null,-1),ue=[ae],de=l("h4",null,"*You should only hear the audio once",-1);function ce(e,n,t,u,i,s){return o(),r("div",se,[l("div",ie,[l("h1",null,[l("button",{onClick:n[0]||(n[0]=(...a)=>s.handlePlay&&s.handlePlay(...a))},[l("i",{class:b({"fa-sharp fa-regular fa-circle-pause":i.play,"fa-regular fa-circle-play":!i.play})},null,2)])]),l("div",oe,[l("h1",le,p(i.currentTime)+" / "+p(i.duration),1)]),l("audio",{id:t.id,preload:"auto"},ue,8,re)]),de])}const M=g(ne,[["render",ce]]),k=0,G=2,U=3,he=5,xe=4;var j=(e=>(e[e.general=0]="general",e[e.speaking=1]="speaking",e[e.reading=2]="reading",e[e.writing=3]="writing",e[e.overall=4]="overall",e[e.listening=5]="listening",e))(j||{});function pe(e){if(e==null||e==null)return 5;switch(e){case 1:return 5;case 2:return 2;default:return 3}}const _e=0,ge=1,me=2,V=3,W=5,Y=6,B=7;var E=(e=>(e[e.input=_e]="input",e[e.checkbox=ge]="checkbox",e[e.radio=me]="radio",e[e.textArea=V]="textArea",e[e.fillOn=W]="fillOn",e[e.select=Y]="select",e[e.fill=B]="fill",e))(E||{});function H(e,n=null){var t;return{type:n??pe(e.Skill),description:e.Description??"",script:e.Script,title:e.Title,groupQuestions:(t=e==null?void 0:e.GroupQuestions)==null?void 0:t.map(u=>fe(u)),audio:e.Audio??""}}function fe(e){var n;return{description:e==null?void 0:e.Description,audio:(e==null?void 0:e.Audio)??"",title:(e==null?void 0:e.Title)??"",image:(e==null?void 0:e.Image)??"",id:e==null?void 0:e._id,type:X(e.Type),questions:(n=e==null?void 0:e.Questions)==null?void 0:n.map(t=>we(t,e.Type))}}function we(e,n){var t;return{description:"",image:"",userAnswer:"",userAnswers:[],idQuestion:e._id,correctAnswer:e==null?void 0:e.Correct,correctAnswers:[],title:e==null?void 0:e.Body,answers:(t=e==null?void 0:e.Answers)==null?void 0:t.map(u=>Te(u)),is_answer:!1,type:X(n),order:e==null?void 0:e.Order}}function Te(e){return{content:e}}function X(e){switch(e){case 1:return E.input;case 2:return E.checkbox;case 3:return E.textArea;case 5:return E.fillOn;case 6:return E.select;case 7:return E.fill;case 0:default:return E.radio}}const ye={name:"GroupQuestionFillText",components:{AudioTest:M},data(){return{TYPE_READING:G,TYPE_WRITING:U,QUESTION_TYPE_FILL:B,TYPE_GENERAL:k,html:""}},mounted(){this.html=this.groupQuestionProp.questions.map(e=>e.title.replaceAll("##",`<input type='text' id='question-${e.idQuestion}' value='${e.userAnswer}' />`)).join("")},updated(){this.addAllEventListeners()},beforeUnmount(){this.removeAllEventListeners()},props:{groupQuestionProp:{type:Object,default(){return{title:"",questions:[]}}},indexProp:{type:Number,default(){return 0}},typeTest:{type:Number,default(){return 0}},IdAudioIsRunning:{type:String,default(){return"0"}},groupQuestionType:{type:Number,default(){return 0}}},methods:{getQuestionById(e){return this.groupQuestionProp.questions.find(n=>e===`question-${n.idQuestion}`)},onAudioPlayed(e){this.$emit("onAudioPlayed",e)},addAllEventListeners(){this.ids.map(function(n){return document.getElementById(n)}).forEach(n=>{n.addEventListener("input",this.inputChanged)})},removeAllEventListeners(){this.ids.map(function(n){return document.getElementById(n)}).forEach(n=>{n.removeEventListener("input",this.inputChanged)})},inputChanged(e){let n=this.getQuestionById(e.target.id);n&&(n.userAnswer=e.target.value,n.answered=n.userAnswer!="",console.log("Input changed:",e.target.value))}},computed:{ids(){return this.groupQuestionProp.questions.map(e=>`question-${e.idQuestion}`)}},watch:{groupQuestionProp(){this.html=this.groupQuestionProp.questions.map(e=>e.title.replaceAll("##",`<input type='text' id='question-${e.idQuestion}' value='${e.userAnswer}' />`)).join("")}}},Ae={class:"groupQuestion"},Ee={class:"text-left"},be=l("h1",{class:"xl:text-[24px] text-[#01518E] lg:text-[17px]"},null,-1),ve=["innerHTML"],Pe=["innerHTML"],Ie=["src"],Se=["innerHTML"];function ke(e,n,t,u,i,s){const a=x("audio-test");return o(),r("div",Ae,[t.groupQuestionProp.audio?(o(),w(a,{key:0,id:t.groupQuestionProp.id,src:t.groupQuestionProp.audio,onOnAudioPlayed:s.onAudioPlayed,IdAudioIsRunning:t.IdAudioIsRunning},null,8,["id","src","onOnAudioPlayed","IdAudioIsRunning"])):d("",!0),l("div",Ee,[be,t.groupQuestionProp.title?(o(),r("h1",{key:0,innerHTML:t.groupQuestionProp.title,class:"mt-6 text:sm xl:text-lg lg:text-lg md:text-lg"},null,8,ve)):d("",!0),l("p",{class:"text:sm xl:text-[16px] lg:text-lg md:text-lg",innerHTML:t.groupQuestionProp.description},null,8,Pe),t.groupQuestionProp.image?(o(),r("img",{key:1,alt:"",src:t.groupQuestionProp.image,class:"xl:w-[800px] w-full lg:w-[600px]"},null,8,Ie)):d("",!0)]),l("div",{innerHTML:i.html},null,8,Se)])}const Qe=g(ye,[["render",ke]]),Ce={name:"AnswerInputRadio",data(){return{}},props:{data:{type:Object,default:{}},id:{type:String},name:{type:String},userAnswer:{type:String}},computed:{answer(){var e;return((e=this.data)==null?void 0:e.content)??""}},methods:{change(){this.$emit("selectAnswer",this.answer)},checkAnswerSelected(){return this.userAnswer==this.answer}}},Ne=["checked","id","name","value"],Oe=["for"];function Le(e,n,t,u,i,s){return o(),r("div",null,[l("input",{checked:s.checkAnswerSelected(),type:"radio",id:t.id,name:t.name,onChange:n[0]||(n[0]=(...a)=>s.change&&s.change(...a)),value:s.answer,class:"accent-[#01518E]"},null,40,Ne),l("label",{for:t.id,class:"xl:text-[16px] text-test-color-text ml-[15px] xl:text-4 lg:text-[14px]"},p(this.answer),9,Oe)])}const Me=g(Ce,[["render",Le]]),qe={name:"AnswerInputCheckBox",data(){return{selected:!1,disabled:!1}},props:{data:{type:Object,default:{}},id:"",name:"",userAnswers:{type:Object,default:[]}},mounted(){this.checkAnswerSelected()},watch:{userAnswers(){this.disabled=!this.selected&&this.userAnswers.length>=2}},computed:{answer(){var e;return((e=this.data)==null?void 0:e.content)??""}},methods:{change(){this.$emit("selectAnswer",this.answer,this.selected)},checkAnswerSelected(){this.selected=this.userAnswers.includes(this.answer)}}},De=["id","name","disabled"],Re=["for"];function Ge(e,n,t,u,i,s){return o(),r("div",null,[Q(l("input",{type:"checkbox",class:"pointer accent-[#01518E]",id:t.id,name:t.name,onChange:n[0]||(n[0]=(...a)=>s.change&&s.change(...a)),"onUpdate:modelValue":n[1]||(n[1]=a=>i.selected=a),disabled:i.disabled},null,40,De),[[J,i.selected]]),l("label",{for:t.id,class:"xl:text-[16px] text-test-color-text ml-[15px] xl:text-4 lg:text-[14px] pointer"},p(this.answer),9,Re)])}const Ue=g(qe,[["render",Ge]]);const Ye={name:"AnswerInputText",data(){return{answer:""}},props:{userAnswer:{type:String},id:{type:String}},mounted(){this.answer=this.userAnswer},methods:{change(){this.$emit("changeInputAnswer",this.answer.trim().replaceAll(" "," ").toLocaleLowerCase())}}},Be=["id"];function He(e,n,t,u,i,s){return Q((o(),r("input",{id:t.id,onInput:n[0]||(n[0]=(...a)=>s.change&&s.change(...a)),placeholder:"Enter your answer",class:"border-test-color-text border-b-[0.002px] pl-5 w-[65%] h-[48px] focus:outline-none focus:border-[#01518E] transition duration-300 bg-white","onUpdate:modelValue":n[1]||(n[1]=a=>i.answer=a)},null,40,Be)),[[R,i.answer]])}const Fe=g(Ye,[["render",He],["__scopeId","data-v-168bdf3e"]]);const je={name:"AnswerInputFillText",data(){return{answer:""}},props:{userAnswer:{type:String},question:{type:String},id:{type:String}},computed:{questions(){const e=this.question.split("##");return e.map((t,u)=>({text:t,input:u!=e.length-1}))}},mounted(){this.answer=this.userAnswer},methods:{change(){this.$emit("changeInputAnswer",this.answer.trim().replaceAll(" "," ").toLocaleLowerCase())}}},Ve=["innerHTML"],We=["id"];function Xe(e,n,t,u,i,s){return o(!0),r(f,null,T(s.questions,(a,c)=>(o(),r("span",{class:"text-justify",key:"answer"+c},[a.text!==""?(o(),r("span",{key:0,class:"text-justify",innerHTML:a.text},null,8,Ve)):d("",!0),L(),a.input?Q((o(),r("input",{key:1,type:"text",id:t.id,onInput:n[0]||(n[0]=(...h)=>s.change&&s.change(...h)),placeholder:" ",class:"mt-[5px] border-test-color-text border-b-[0.002px] w-[120px] h-[32px] focus:outline-none focus:border-[#333399] transition duration-300","onUpdate:modelValue":n[1]||(n[1]=h=>i.answer=h)},null,40,We)),[[R,i.answer]]):d("",!0)]))),128)}const Ke=g(je,[["render",Xe],["__scopeId","data-v-6ced27d4"]]),$e={name:"QuestionSelectTest",components:{},data(){return{}},mounted(){},props:{question:{type:Object,default(){return{answers:[],title:"",type:-1}}}},computed:{questions(){const e=this.question.title.split("##");return console.log(e,"arr"),e.map((t,u)=>({text:t,input:u!=e.length-1}))}},methods:{handleChangeSingleAnswer(){this.question.answered=this.question.userAnswer!=""}}},Je={class:"mt-5 h-fit"},ze=["innerHTML"],Ze=["id"],et=l("option",{selected:"",disabled:"",value:""},"Choose",-1),tt=["value"];function nt(e,n,t,u,i,s){return o(),r("span",Je,[(o(!0),r(f,null,T(s.questions,(a,c)=>(o(),r("span",{class:"text-justify",key:"answer"+c},[a.text!==""?(o(),r("span",{key:0,class:"text-justify",innerHTML:a.text},null,8,ze)):d("",!0),a.input?Q((o(),r("select",{key:1,id:`question-${t.question.idQuestion}`,onChange:n[0]||(n[0]=(...h)=>s.handleChangeSingleAnswer&&s.handleChangeSingleAnswer(...h)),class:"text-[16px] text-start mt-[5px] h-[32px] border-test-color-text border-b-[0.002px] h-[32px] focus:outline-none focus:border-[#01518E] transition duration-300","onUpdate:modelValue":n[1]||(n[1]=h=>t.question.userAnswer=h)},[et,(o(!0),r(f,null,T(t.question.answers,(h,_)=>(o(),r("option",{value:h.content,key:e.option+t.question.idQuestion+_},p(h.content),9,tt))),128))],40,Ze)),[[z,t.question.userAnswer]]):d("",!0)]))),128))])}const st=g($e,[["render",nt]]),it=0,ot=1,lt=2,rt={name:"ModalNotificationPreventDefaultPaste",data(){return{}},props:{visible:{type:Boolean,default(){return!1}}},methods:{handleCloseModal(){this.$emit("close")}}},at={class:"w-[318px] rounded-2xl md:min-h-fit bg-white xl:w-[674px] pb-6"},ut=l("div",{class:"w-full bg-[#01518E] h-[24px] rounded-t-2xl"},null,-1),dt={class:"p-5"},ct=l("div",{class:"header text-[24px] text-[#01518E] font-bold xl:text-[40px] uppercase"},"Nhắc nhở",-1),ht=l("div",{class:"content text-[14px] text-[#000000] xl:text-[16px] h-1/2"},"Vui lòng không sao chép dữ liệu từ bên ngoài vào bài thi",-1),xt={class:"footer flex flex-row-reverse mr-[12px] mt-[32px]"};function pt(e,n,t,u,i,s){return o(),r("div",{class:b([{hidden:!t.visible,"":t.visible},"fixed inset-0 bg-[#70707090] h-full flex justify-center items-center"])},[l("div",at,[ut,l("div",dt,[ct,ht,l("div",xt,[l("button",{class:"w-[130px] h-[41px] bg-[#01518E] rounded-[28px] text-white xl:text-[16px] xl:w-[148px] xl:h-[47px]",onClick:n[0]||(n[0]=(...a)=>s.handleCloseModal&&s.handleCloseModal(...a))},"Đóng ")])])])],2)}const _t=g(rt,[["render",pt]]),gt={name:"AnswerInputTextArea",components:{ModalNotificationPreventDefaultPaste:_t},data(){return{answer:"",isWarning:!1}},props:{userAnswer:{type:String}},mounted(){this.answer=this.userAnswer},methods:{change(){this.$emit("changeInputAnswer",this.answer.trim().replaceAll(" "," ").toLocaleLowerCase())},preventPaste(e){e.preventDefault(),this.isWarning=!0}}};function mt(e,n,t,u,i,s){const a=x("ModalNotificationPreventDefaultPaste");return o(),r(f,null,[Q(l("textarea",{class:"w-full overflow-auto h-[347px] bg-[#F7F6F6] border-white rounded-[16px] p-4 xl:w-full xl:h-[617px] xl:p-[20px] xl:text-[16px] focus:outline-none","onUpdate:modelValue":n[0]||(n[0]=c=>i.answer=c),onInput:n[1]||(n[1]=(...c)=>s.change&&s.change(...c)),onPaste:n[2]||(n[2]=(...c)=>s.preventPaste&&s.preventPaste(...c)),placeholder:"Nhập câu trả lời của bạn ở đây"},`\r
  `,544),[[R,i.answer]]),A(a,{visible:i.isWarning,onClose:n[3]||(n[3]=c=>i.isWarning=!1)},null,8,["visible"])],64)}const ft=g(gt,[["render",mt]]),wt={name:"questionTest",components:{AnswerInputTextArea:ft,AnswerInputText:Fe,AnswerInputCheckBox:Ue,AnswerInputRadio:Me,AnswerInputFillText:Ke,QuestionSelectTest:st},data(){return{selectedAnswer:"",selectedAnswers:[],answer:"",QUESTION_TYPE_CHECKBOX:ot,QUESTION_TYPE_INPUT:it,QUESTION_TYPE_RADIO:lt,QUESTION_TYPE_TEXT_AREA:V,QUESTION_TYPE_FILL_ON_QUESTION:W,QUESTION_TYPE_SELECT:Y}},mounted(){},props:{question:{type:Object,default(){return{answers:[],title:"",type:-1}}},indexQuestion:{type:Number,default:0},indexGroupQuestion:{type:Number,default:0}},methods:{generateAnswerId(e,n,t){return`${this.generateAnswerName(e,n)}-${t}`},generateAnswerName(e,n){return`${e}-${n}`},handleChangeSingleAnswer(e){this.question.userAnswer=e,this.question.answered=e!=""},handleChangeMultipleAnswers(e,n){this.changeMultipleSelectedAnswers(e,n),this.question.userAnswers=[...this.selectedAnswers],this.question.answered=this.selectedAnswers.length>0},changeMultipleSelectedAnswers(e,n){let t=this.selectedAnswers.findIndex(u=>u==n);if(!n){this.selectedAnswers.splice(t,1);return}t<0&&this.selectedAnswers.push(e)}}},Tt={key:0,class:"mt-5 h-fit"},yt=["id"],At={key:0,class:"xl:text-[16px]"},Et=["innerHTML"],bt={key:0,class:"flex flex-col mt-[5px] w-full"},vt={key:0},Pt={key:1},It={key:1},St={key:2},kt={key:1},Qt={key:2};function Ct(e,n,t,u,i,s){const a=x("AnswerInputRadio"),c=x("AnswerInputCheckBox"),h=x("AnswerInputTextArea"),_=x("AnswerInputText"),m=x("AnswerInputFillText"),D=x("QuestionSelectTest");return o(),r(f,null,[t.question.type!==i.QUESTION_TYPE_FILL_ON_QUESTION&&t.question.type!==i.QUESTION_TYPE_SELECT?(o(),r("div",Tt,[l("p",{id:t.question.type!==i.QUESTION_TYPE_INPUT?`question-${t.question.idQuestion}`:`main-question-${t.question.idQuestion}`},[t.question.type!==i.QUESTION_TYPE_TEXT_AREA?(o(),r("span",At,[l("b",null,p(t.question.order)+". ",1)])):d("",!0),l("span",{class:"xl:text-[16px] text-[#4E4E4E] lg:text-[14px]",innerHTML:t.question.title},null,8,Et)],8,yt),t.question.type===i.QUESTION_TYPE_RADIO||t.question.type==i.QUESTION_TYPE_CHECKBOX?(o(),r("div",bt,[t.question.type==i.QUESTION_TYPE_RADIO?(o(),r("div",vt,[(o(!0),r(f,null,T(t.question.answers,(S,v)=>(o(),w(a,{data:S,id:s.generateAnswerId(t.indexGroupQuestion,t.indexQuestion,v),name:s.generateAnswerName(t.indexGroupQuestion,t.indexQuestion),onSelectAnswer:s.handleChangeSingleAnswer,key:v,userAnswer:t.question.userAnswer??""},null,8,["data","id","name","onSelectAnswer","userAnswer"]))),128))])):d("",!0),t.question.type==i.QUESTION_TYPE_CHECKBOX?(o(),r("div",Pt,[(o(!0),r(f,null,T(t.question.answers,(S,v)=>(o(),w(c,{data:S,id:s.generateAnswerId(t.indexGroupQuestion,t.indexQuestion,v),name:s.generateAnswerName(t.indexGroupQuestion,t.indexQuestion),onSelectAnswer:s.handleChangeMultipleAnswers,key:v,userAnswers:t.question.userAnswers??[]},null,8,["data","id","name","onSelectAnswer","userAnswers"]))),128))])):d("",!0)])):d("",!0),t.question.type===i.QUESTION_TYPE_TEXT_AREA?(o(),r("div",It,[A(h,{onChangeInputAnswer:s.handleChangeSingleAnswer,userAnswer:t.question.userAnswer??""},null,8,["onChangeInputAnswer","userAnswer"])])):d("",!0),t.question.type===i.QUESTION_TYPE_INPUT?(o(),r("div",St,[A(_,{id:`question-${t.question.idQuestion}`,onChangeInputAnswer:s.handleChangeSingleAnswer,userAnswer:t.question.userAnswer??""},null,8,["id","onChangeInputAnswer","userAnswer"])])):d("",!0)])):d("",!0),t.question.type===i.QUESTION_TYPE_FILL_ON_QUESTION?(o(),r("span",kt,[A(m,{question:t.question.title,onChangeInputAnswer:s.handleChangeSingleAnswer,userAnswer:t.question.userAnswer??"",id:`question-${t.question.idQuestion}`},null,8,["question","onChangeInputAnswer","userAnswer","id"])])):d("",!0),t.question.type===i.QUESTION_TYPE_SELECT?(o(),r("span",Qt,[A(D,{question:t.question},null,8,["question"])])):d("",!0)],64)}const Nt=g(wt,[["render",Ct]]),Ot={name:"group-question",components:{QuestionTest:Nt,AudioTest:M,GroupQuestionFillText:Qe},data(){return{grid_cols_3:"lg:grid-cols-3",grid_cols_2:"lg:grid-cols-2",grid_cols_1:"lg:grid-cols-1",TYPE_READING:G,TYPE_WRITING:U,QUESTION_TYPE_SELECT:Y,TYPE_GENERAL:k,QUESTION_TYPE_FILL:B}},props:{groupQuestionProp:{type:Object,default(){return{title:"",questions:[]}}},indexProp:{type:Number,default(){return 0}},typeTest:{type:Number,default(){return 0}},IdAudioIsRunning:{type:String,default(){return"0"}},groupQuestionType:{type:Number,default(){return 0}}},methods:{onAudioPlayed(e){this.$emit("onAudioPlayed",e)}}},Lt={key:1,class:"groupQuestion"},Mt={class:"flex xl:block lg:block"},qt={class:"grow"},Dt={class:""},Rt={class:"text-left"},Gt=l("h1",{class:"xl:text-[24px] text-[#01518E] lg:text-[17px]"},null,-1),Ut=["innerHTML"],Yt=["innerHTML"],Bt=["src"],Ht={key:0,class:"xl:grid lg:grid gap-4 lg:grid-cols-3"},Ft={key:1},jt={key:1};function Vt(e,n,t,u,i,s){const a=x("GroupQuestionFillText"),c=x("audio-test"),h=x("QuestionTest");return t.groupQuestionType===i.QUESTION_TYPE_FILL?(o(),w(a,{key:0,groupQuestionProp:t.groupQuestionProp,indexProp:t.indexProp,typeTest:t.typeTest,groupQuestionType:t.groupQuestionType},null,8,["groupQuestionProp","indexProp","typeTest","groupQuestionType"])):(o(),r("div",Lt,[t.groupQuestionProp.audio?(o(),w(c,{key:0,id:t.groupQuestionProp.id,src:t.groupQuestionProp.audio,onOnAudioPlayed:s.onAudioPlayed,IdAudioIsRunning:t.IdAudioIsRunning},null,8,["id","src","onOnAudioPlayed","IdAudioIsRunning"])):d("",!0),l("div",Mt,[l("div",qt,[l("div",null,[l("div",Dt,[l("div",Rt,[Gt,t.groupQuestionProp.title?(o(),r("h1",{key:0,innerHTML:t.groupQuestionProp.title,class:"mt-6 text:sm xl:text-lg lg:text-lg md:text-lg"},null,8,Ut)):d("",!0),l("p",{class:"text:sm xl:text-[16px] lg:text-lg md:text-lg",innerHTML:t.groupQuestionProp.description},null,8,Yt),t.groupQuestionProp.image?(o(),r("img",{key:1,alt:"",src:t.groupQuestionProp.image,class:"xl:w-[800px] w-full lg:w-[600px]"},null,8,Bt)):d("",!0)])]),t.typeTest===i.TYPE_GENERAL?(o(),r("div",Ht,[(o(!0),r(f,null,T(t.groupQuestionProp.questions,(_,m)=>(o(),w(h,{indexQuestion:m,question:_,indexGroupQuestion:t.indexProp,key:m},null,8,["indexQuestion","question","indexGroupQuestion"]))),128))])):(o(),r("div",Ft,[t.groupQuestionType!==i.QUESTION_TYPE_SELECT?(o(),r("div",{key:0,class:b(["xl:grid lg:grid gap-4",[t.typeTest==i.TYPE_READING?i.grid_cols_2:t.typeTest==i.TYPE_WRITING?i.grid_cols_1:i.grid_cols_3]])},[(o(!0),r(f,null,T(t.groupQuestionProp.questions,(_,m)=>(o(),w(h,{indexQuestion:m,question:_,indexGroupQuestion:t.indexProp,key:m},null,8,["indexQuestion","question","indexGroupQuestion"]))),128))],2)):(o(),r("span",jt,[(o(!0),r(f,null,T(t.groupQuestionProp.questions,(_,m)=>(o(),w(h,{class:b(i.grid_cols_1),indexQuestion:m,question:_,indexGroupQuestion:t.indexProp,key:m},null,8,["class","indexQuestion","question","indexGroupQuestion"]))),128))]))]))])])])]))}const q=g(Ot,[["render",Vt]]),Wt={name:"VocabularyTest",components:{GroupQuestion:q},data(){return{}},props:{data:{type:Object,default:{groupQuestions:[]}}},methods:{}},Xt={class:"bg-white"},Kt={class:"p-2 lg:p-5 lg:pt-0 lg:bg-white"},$t={class:""};function Jt(e,n,t,u,i,s){const a=x("GroupQuestion");return o(),r("div",Xt,[l("div",Kt,[l("div",$t,[(o(!0),r(f,null,T(t.data.groupQuestions,(c,h)=>(o(),w(a,{groupQuestionProp:c,groupQuestionType:c.type,indexProp:h,key:h},null,8,["groupQuestionProp","groupQuestionType","indexProp"]))),128))])])])}const zt=g(Wt,[["render",Jt]]),Zt={name:"readingTest",components:{GroupQuestion:q,AudioTest:M},data(){return{}},created(){},props:{data:{type:Object,default:{groupQuestions:[]}}},methods:{}},en={class:"bg-[#BBEEFF] h-full lg:pt-0 pt-0"},tn={class:"relative h-full bg-white"},nn={class:"overflow-auto bg-[#f0f9fc] p-2 absolute h-1/2 w-full top-0 lg:bg-white lg:h-full lg:p-5 lg:inset-y-0 lg:left-0 lg:w-1/2"},sn={key:0,class:"text-[#01518E] text-xl font-bold mb-2"},on={key:2,class:"text-justify mt-2"},ln=["innerHTML"],rn={class:"overflow-auto bg-[#F8F9FA] p-2 absolute h-1/2 w-full bottom-0 lg:h-full lg:p-5 lg:inset-y-0 lg:right-0 lg:left-[w-1/2] lg:w-1/2"};function an(e,n,t,u,i,s){const a=x("audio-test"),c=x("group-question");return o(),r("div",en,[l("div",tn,[l("div",nn,[t.data.title?(o(),r("h1",sn,p(t.data.title),1)):d("",!0),t.data.audio?(o(),w(a,{key:1,id:t.data.title,src:t.data.audio,onOnAudioPlayed:e.onAudioPlayed,IdAudioIsRunning:e.IdAudioIsRunning},null,8,["id","src","onOnAudioPlayed","IdAudioIsRunning"])):d("",!0),t.data.description?(o(),r("h1",on,p(t.data.description),1)):d("",!0),l("div",null,[t.data.script?(o(),r("p",{key:0,class:"overflow-auto text-lg text-justify",innerHTML:t.data.script},null,8,ln)):d("",!0)])]),l("div",rn,[(o(!0),r(f,null,T(t.data.groupQuestions,(h,_)=>(o(),r("div",{class:"pb-[15px]",key:_},[A(c,{groupQuestionProp:h,indexProp:_,typeTest:t.data.type,groupQuestionType:h.type},null,8,["groupQuestionProp","indexProp","typeTest","groupQuestionType"])]))),128))])])])}const un=g(Zt,[["render",an]]),dn={name:"ModalConfirmContinue",data(){return{}},props:{visible:{type:Boolean,default(){return!1}},page:{type:Number,default:-1},data:{type:Array,default(){return[]}}},methods:{handleCloseModal(){this.$emit("close")},confirmContinue(){this.$emit("continue")},checkSubmitTest(){return this.page==this.data.length-1}}},cn={class:"w-[318px] rounded-2xl md:min-h-fit bg-white xl:w-[674px] xl:h-[303px] pb-6"},hn=l("div",{class:"w-full bg-[#01518E] h-[24px] rounded-t-2xl"},null,-1),xn={class:"mt-[5px]"},pn={class:"flex flex-row-reverse mr-[15px]"},_n=l("i",{class:"fa fa-times"},null,-1),gn=[_n],mn={class:"px-[28px] xl:px-[28px] h-1/2 xl:h-[130px]"},fn={class:"header text-[24px] text-[#01518E] font-bold xl:text-[40px]"},wn={class:"content text-[14px] text-[#000000] xl:text-[16px] h-1/2"},Tn={class:"footer flex flex-row-reverse mr-[12px] mt-[32px]"};function yn(e,n,t,u,i,s){return o(),r("div",{class:b([{hidden:!t.visible,"":t.visible},"fixed inset-0 bg-[#70707090] h-full flex justify-center items-center"])},[l("div",cn,[hn,l("div",xn,[l("div",pn,[l("button",{class:"text-[24px] p-0",onClick:n[0]||(n[0]=a=>s.handleCloseModal())},gn)]),l("div",mn,[l("div",fn,"XÁC NHẬN "+p(s.checkSubmitTest()?"NỘP BÀI":"TIẾP TỤC"),1),l("div",wn,"Bạn chưa hoàn thành hết câu hỏi, bạn có muốn "+p(s.checkSubmitTest()?"nộp bài":"tiếp tục"),1),l("div",Tn,[l("button",{class:"w-[130px] h-[41px] bg-[#01518E] rounded-[28px] text-white xl:text-[16px] xl:w-[148px] xl:h-[47px]",onClick:n[1]||(n[1]=(...a)=>s.confirmContinue&&s.confirmContinue(...a))},p(s.checkSubmitTest()?"NỘP BÀI":"TIẾP TỤC"),1)])])])])],2)}const K=g(dn,[["render",yn]]),An={name:"listenTest",components:{AudioTest:M,GroupQuestion:q,ModalTest:K},data(){return{statusModal:!1,IdAudioIsRunning:"0",audioPlayingIds:[]}},props:{data:{type:Object,default(){return{groupQuestions:[]}}}},methods:{handleOpenModal(e){this.statusModal=e},handleCloseModal(e){this.statusModal=e},onAudioPlayed(e){this.audioPlayingIds&&(this.audioPlayingIds.forEach(n=>{n!==e&&this.turnOffAudio(n)}),this.audioPlayingIds=[]),this.audioPlayingIds.push(e)},turnOffAudio(e){var n;(n=document.getElementById(e))==null||n.pause()}}},En={class:"bg-[#BBEEFF] h-full lg:pt-0 pt-0"},bn={key:0,class:"relative h-full bg-white"},vn={class:"overflow-auto bg-[#f0f9fc] p-2 absolute h-1/2 w-full top-0 lg:bg-white lg:h-full lg:p-5 lg:inset-y-0 lg:left-0 lg:w-1/3"},Pn={key:0,class:"text-[#01518E] text-xl font-bold mb-2"},In={key:2,class:"text-justify mt-2"},Sn=["innerHTML"],kn={class:"overflow-auto p-2 absolute h-1/2 w-full bottom-0 lg:h-full lg:p-5 lg:inset-y-0 lg:right-0 lg:left-[w-2/3] lg:w-2/3"},Qn={key:1,class:"h-full bg-white p-2 lg:p-5"},Cn={key:0,class:"text-[#01518E] text-xl font-bold mb-2"},Nn={key:2,class:"text-justify mt-2"},On=["innerHTML"];function Ln(e,n,t,u,i,s){const a=x("audio-test"),c=x("group-question"),h=x("modal-test");return o(),r(f,null,[l("div",En,[t.data.script?(o(),r("div",bn,[l("div",vn,[t.data.title?(o(),r("h1",Pn,p(t.data.title),1)):d("",!0),t.data.audio?(o(),w(a,{key:1,id:t.data.title,src:t.data.audio,onOnAudioPlayed:s.onAudioPlayed,IdAudioIsRunning:i.IdAudioIsRunning},null,8,["id","src","onOnAudioPlayed","IdAudioIsRunning"])):d("",!0),t.data.description?(o(),r("h1",In,p(t.data.description),1)):d("",!0),l("div",null,[t.data.script?(o(),r("p",{key:0,class:"overflow-auto text-lg text-justify",innerHTML:t.data.script},null,8,Sn)):d("",!0)])]),l("div",kn,[(o(!0),r(f,null,T(t.data.groupQuestions,(_,m)=>(o(),r("div",{class:"pb-[15px]",key:m},[A(c,{groupQuestionType:_.type,groupQuestionProp:_,indexProp:m,typeTest:t.data.type},null,8,["groupQuestionType","groupQuestionProp","indexProp","typeTest"])]))),128))])])):(o(),r("div",Qn,[t.data.title?(o(),r("h1",Cn,p(t.data.title),1)):d("",!0),t.data.audio?(o(),w(a,{key:1,id:t.data.title,src:t.data.audio,onOnAudioPlayed:s.onAudioPlayed,IdAudioIsRunning:i.IdAudioIsRunning},null,8,["id","src","onOnAudioPlayed","IdAudioIsRunning"])):d("",!0),t.data.description?(o(),r("h1",Nn,p(t.data.description),1)):d("",!0),l("div",null,[t.data.script?(o(),r("p",{key:0,class:"overflow-auto text-lg text-justify",innerHTML:t.data.script},null,8,On)):d("",!0)]),(o(!0),r(f,null,T(t.data.groupQuestions,(_,m)=>(o(),r("div",{class:"pb-[15px]",key:m},[A(c,{groupQuestionProp:_,indexProp:m,typeTest:t.data.type,groupQuestionType:_.type},null,8,["groupQuestionProp","indexProp","typeTest","groupQuestionType"])]))),128))]))]),(o(),w(h,{key:i.statusModal,statusModal:i.statusModal,onStatusModal:s.handleCloseModal},null,8,["statusModal","onStatusModal"]))],64)}const Mn=g(An,[["render",Ln]]),qn="/test-input/get-exam",Dn="/test-input/mark-auto",Rn="/test-input/pause-test",Gn="/test-input/get-pause-test",Un=F({id:"examTest",state:()=>({status:11111}),getters:{},actions:{getExam(e){return C.query(`${qn}`,e)},setGeneralTest(e){this.status=e.status},postExam(e){return C.post(`${Dn}`,e)},pauseTest(e){return C.post(`${Rn}`,e)},getPauseTest(e){return C.get(`${Gn}/${e}`)}}}),I=Un(),$=F({id:"placementsTestStore",state:()=>({dataPlacementsTest:[],typePlacementTestNow:0}),getters:{},actions:{async setDataPlacementTestTest(){const{uuid:e}=y.getTestSchedule();let n=await I.getExam({type:"ielts",step:0,uuid:e}).then(t=>t.data.data.map(i=>i.Sections.map(s=>H({...s,Skill:i.Skill},j.general))).reduce((i,s)=>i.concat(s)));this.dataPlacementsTest=n},async setDataStep1Test(){const{uuid:e}=y.getTestSchedule();let n=await I.getExam({type:"ielts",step:1,uuid:e}).then(t=>t.data.data.map(i=>i.Sections.map(s=>H({...s,Skill:i.Skill}))).reduce((i,s)=>i.concat(s)));this.dataPlacementsTest=n}}}),N=$(),Yn={name:"HeaderContent",setup(){return{examTestStore:I,userStore:y}},data(){return{time:null,timeDoTest:"20",interval:null,statusTime:!0,testSchedule:{id:"",name:"",phone:""}}},props:{page:{type:Number,default:-1},data:{type:Array,default(){return[]}},timeTest:{type:Number,default(){return null}},isStepGeneral:{type:Boolean,default(){return!1}}},async mounted(){await this.getCurrentUser(),this.isStepGeneral?this.timeDoTest="20":this.timeDoTest="130",this.countdown()},watch:{data(){clearInterval(this.interval),this.countdown()},isStepGeneral(){this.isStepGeneral?this.timeDoTest="20":this.timeDoTest="130"}},computed:{minute(){return Math.floor(this.time/60)},second(){let e=Math.floor(this.time%60);return e<10?`0${e}`:e},isWarningTime(){return this.minute<5}},methods:{async getCurrentUser(){this.testSchedule=y.getTestSchedule()},nextPage(){this.$emit("nextPage")},backPage(){this.$emit("backPage")},countdown(){this.interval=setInterval(()=>{this.time=Math.round(this.timeTest-new Date().getTime()/1e3),this.time<=0&&(clearInterval(this.interval),this.$emit("timeOut"),this.time=0)},1e3)},async handlePausePlay(){var t;let e={test_input_schedule_id:((t=JSON.parse(localStorage.getItem("testSchedule")))==null?void 0:t.id)??-1,time_pause:P.utc(this.time*1e3).format("HH:mm:ss"),answers:this.data};await I.pauseTest(e),localStorage.setItem("page",`${this.page}`);const n=O.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{n.close(),this.$router.push({path:"/information"})},900),clearInterval(this.interval)}},unmounted(){clearInterval(this.interval)},updated(){y.saveDataTimeInLocal(this.data,this.time,this.testSchedule.uuid)}},Bn={class:"header rounded-2xl bg-test-bg-header-test-mobile lg:rounded lg:mx-auto lg:justify-between lg:px-14 lg:flex lg:items-center lg:bg-test-bg-header-test lg:py-3"},Hn={class:"lg:pt-0 pt-4 flex flex-col items-center lg:items-start"},Fn=l("h1",{class:"text-test-color-question xl:text-[32px] lg:text-[20px] text-[20px] font-bold"},"KIỂM TRA ĐẦU VÀO",-1),jn={class:"text-test-text-header-content xl:text-[16px] lg:text-[14px] text-[14px] font-bold"},Vn={class:"xl:text-center flex justify-center items-center"},Wn={class:"flex flex-col items-center"},Xn={class:"hidden text-test-text-header-content xl:text-[16px] lg:text-[14px] text-[14px] font-bold lg:flex"},Kn={class:"text-test-text-header-content xl:text-[16px] lg:text-[14px] text-[14px] font-bold"},$n={class:"flex justify-between px-7 lg:mt-0 mt-4"},Jn={key:1,class:"xl:w-[132px] xl:h-[47px] text-white lg:w-[112px] lg:h-[41px] lg:text-[14px] w-[103px] h-[36px] lg:mr-[15px]"};function zn(e,n,t,u,i,s){return o(),r("div",Bn,[l("div",Hn,[Fn,l("p",jn,p(i.testSchedule.name)+" - "+p(i.testSchedule.phone),1)]),l("div",null,[l("div",Vn,[l("div",Wn,[l("p",Xn,"Thời gian : "+p(i.timeDoTest)+" phút",1),l("p",Kn,[L("Thời gian còn lại : "),i.time?(o(),r("span",{key:0,class:b(["xl:text-[24px] lg:text-[20px] text-[20px]",{"text-[#01518E]":!s.isWarningTime,"text-[#FF0000]":s.isWarningTime}])},p(`${s.minute}:${s.second}`),3)):d("",!0)])]),l("button",{onClick:n[0]||(n[0]=(...a)=>s.handlePausePlay&&s.handlePausePlay(...a)),class:"lg:block hidden bg-[#D64120] rounded-[28px] xl:w-[132px] xl:h-[47px] text-white lg:w-[112px] lg:h-[41px] lg:text-[14px] lg:ml-[20px] w-[103px] h-[36px] xl:mr-[15px] lg:mr-[30px]"},p(i.statusTime?"Tạm Dừng":"Tiếp Tục"),1)])]),l("div",$n,[l("button",{onClick:n[1]||(n[1]=(...a)=>s.handlePausePlay&&s.handlePausePlay(...a)),class:"lg:hidden bg-[#D64120] rounded-[28px] xl:w-[132px] xl:h-[47px] text-white lg:w-[112px] lg:h-[41px] lg:text-[14px] lg:ml-[20px] w-[103px] h-[36px] xl:mr-[15px] lg:mr-[30px]"},p(i.statusTime?"Tạm Dừng":"Tiếp Tục"),1),t.page>0?(o(),r("button",{key:0,onClick:n[2]||(n[2]=(...a)=>s.backPage&&s.backPage(...a)),class:"bg-[#01518E] rounded-[28px] xl:w-[132px] xl:h-[47px] text-white lg:w-[112px] lg:h-[41px] lg:text-[14px] w-[103px] h-[36px] lg:mr-[15px]"}," Phần Trước ")):(o(),r("button",Jn)),l("button",{onClick:n[3]||(n[3]=(...a)=>s.nextPage&&s.nextPage(...a)),class:"bg-[#01518E] rounded-[28px] xl:w-[132px] xl:h-[47px] text-white xl:ml-[30px] lg:w-[112px] lg:h-[41px] lg:text-[14px] w-[103px] h-[36px]"},p(t.page==t.data.length-1?"Nộp Bài":"Tiếp Tục"),1)])])}const Zn=g(Yn,[["render",zn]]),es={name:"buttonExam",props:{questions:{type:Object,default:[]}}},ts=["href"];function ns(e,n,t,u,i,s){return o(!0),r(f,null,T(t.questions,(a,c)=>(o(),r("div",{key:c,class:"mr-4 mb-1"},[l("a",{href:`#question-${a.idQuestion}`},[l("button",{class:b([{"text-white bg-test-color-button-did-answer":a.answered,"bg-test-color-button-not-done-answer":!a.answered},"text-center rounded-32 h-8 min-w-[32px]"])},p(a.order),3)],8,ts)]))),128)}const ss=g(es,[["render",ns]]),is={name:"ModalDisplayResults",data(){return{result:null}},props:{visible:{type:Boolean,default(){return!1}},correctAnswer:{type:Number,default(){return 0}},countQuestion:{type:Number,default(){return 0}}},mounted(){this.result()},methods:{handleCloseModal(){this.$emit("visible",!1)},nextPageBegin(){this.$router.push({path:"/information",replace:!0})}}},os={class:"w-[318px] rounded-2xl h-[230px] bg-white xl:w-[674px] xl:h-[303px]"},ls=l("div",{class:"w-full bg-[#01518E] h-[24px] rounded-t-2xl"},null,-1),rs={class:"mt-[5px]"},as=l("div",{class:"flex flex-row-reverse mr-[15px]"},null,-1),us={class:"px-[28px] xl:px-[28px] h-1/2 xl:h-[130px]"},ds=l("div",{class:"header text-[24px] text-[#01518E] font-bold xl:text-[40px] xl:text-[40px]"},"HOÀN THÀNH",-1),cs={class:"content text-[14px] text-[#000000] xl:text-[16px] h-1/2"},hs=l("br",null,null,-1),xs={class:"footer flex flex-row-reverse mr-[12px] mt-[32px]"};function ps(e,n,t,u,i,s){return o(),r("div",{class:b([{hidden:!t.visible,"":t.visible},"absolute inset-0 bg-[#70707090] h-full flex justify-center items-center"])},[l("div",os,[ls,l("div",rs,[as,l("div",us,[ds,l("div",cs,[L("Bạn đã hoàn thành phần thi Vocabulary & Grammar"),hs,L(),l("span",null," Số câu trả lời đúng: "+p(t.correctAnswer)+"/"+p(t.countQuestion),1)]),l("div",xs,[l("button",{class:"w-[130px] h-[41px] bg-[#01518E] rounded-[28px] text-white xl:text-[16px] xl:w-[148px] xl:h-[47px]",onClick:n[0]||(n[0]=(...a)=>s.nextPageBegin&&s.nextPageBegin(...a))},"Tiếp Tục")])])])])],2)}const _s=g(is,[["render",ps]]),gs={name:"writeTest",components:{GroupQuestion:q},props:{data:{type:Object,default(){return{groupQuestions:[]}}}},methods:{handleTextAreaAnswer(e){this.data.groupQuestions[0].questions[0].userAnswer=e}},computed:{userAnswer(){return this.data.groupQuestions[0].questions[0].userAnswer}}},ms={class:"bg-white pt-0 h-auto xl:pt-0"},fs={class:"bg-white rounded-t-32 h-auto"},ws={class:"px-[28px] mt-[16px] xl:mt-[30px]"},Ts=["innerHTML"],ys=["innerHTML"];function As(e,n,t,u,i,s){const a=x("group-question");return o(),r("div",ms,[l("div",fs,[l("div",ws,[l("h1",{class:"text-[12px] mb-[8px] xl:text-[20px] xl:mb-[14px] lg:text-[18px] md:text-[16px]",innerHTML:t.data.description},null,8,Ts),l("p",{class:"text-[14px] mb-[8px] xl:text-[16px] xl:mb-[26px]",innerHTML:t.data.script},null,8,ys),(o(!0),r(f,null,T(t.data.groupQuestions,(c,h)=>(o(),r("div",{key:h},[A(a,{groupQuestionProp:c,indexProp:h,typeTest:t.data.type,groupQuestionType:c.type},null,8,["groupQuestionProp","indexProp","typeTest","groupQuestionType"])]))),128))])])])}const Es=g(gs,[["render",As]]);const bs={name:"GeneralTest",components:{WriteTest:Es,ModalDisplayResults:_s,ModalConfirmContinue:K,HeaderContent:Zn,ListenTest:Mn,ReadingTest:un,VocabularyTest:zt,ButtonExam:ss},data(){return{data:[],page:0,visibleConfirmContinue:!1,visibleDisplayResult:!1,correctAnswer:0,confirm:!1,scorePassTest:20,OVERALL:xe,TYPE_LISTENING:he,TYPE_WRITING:U,TYPE_READING:G,TYPE_GENERAL:k,testSchedule:JSON.parse(localStorage.getItem("testSchedule")),timeTest:null,timeIelts:7800,timeVocabulary:1200,notErrorMakeExam:!1,flagSubmitted:!1,countSubmit:0}},async mounted(){this.checkToken();const e=O.service({lock:!0,text:"Vui lòng đợi trong giây lát ...",background:"rgba(0, 0, 0, 0.7)"});if(this.timeTest=Math.round(new Date().getTime()/1e3+this.timeVocabulary),await N.setDataPlacementTestTest(),e.close(),this.data=N.dataPlacementsTest??[],localStorage.getItem("statusGeneral")==Z){await this.getDataPause(),this.page=localStorage.getItem("page")??0;return}let{uuid:n}=y.getTestSchedule(),{phone:t}=y.getTestSchedule(),{dataAnswer:u,time:i,latest_time_do_test:s}=y.getDataTimeInLocal(n)??y.getDataTimeInLocal(t);if(u!=null){this.data=u;let a=new Date().getTime()/1e3,c=a-s/1e3;this.timeTest=+i+a-c,this.timeTest<=0&&(this.timeTest=0)}},methods:{checkToken(){JSON.parse(localStorage.getItem("testSchedule"))||this.$router.push({name:"login"})},getConfirmQuestionsSection(){var e;this.visibleConfirmContinue=((e=this.allQuestions)==null?void 0:e.find(n=>!n.answered))!=null},getConfirmQuestionsTest(){var e;this.visibleConfirmContinue=((e=this.allQuestionTest)==null?void 0:e.find(n=>!n.answered))!=null},getConfirmQuestion(){this.page==this.data.length-1?this.getConfirmQuestionsTest():this.getConfirmQuestionsSection()},nextPage(){if(this.getConfirmQuestion(),!this.visibleConfirmContinue){if(this.page==this.data.length-1){this.handleFinished();return}this.page++}},backPage(){this.page!=0&&this.page--},confirmContinue(){if(this.visibleConfirmContinue=!1,this.page==this.data.length-1){this.handleFinished();return}this.page++},async handleFinishedTestGeneral(){const e=O.service({lock:!0,text:"Vui lòng đợi trong giây lát ...",background:"rgba(0, 0, 0, 0.7)"});if(await this.makeExam(0),await e.close(),!this.notErrorMakeExam){this.$notify.error({title:"Lỗi",message:"Bạn chưa nộp được bài vui lòng thử lại"});return}if(this.visibleDisplayResult=this.correctAnswer<this.scorePassTest,this.visibleDisplayResult){this.flagSubmitted=!0;let{uuid:n}=y.getTestSchedule();this.timeTest=0,setTimeout(()=>{y.deleteDataTimeInLocal(n)},2e3);return}await N.setDataStep1Test(),this.timeTest=new Date().getTime()/1e3+this.timeIelts,this.data=N.dataPlacementsTest??[],this.page=0},async handleFinishedTestIelts(){const e=O.service({lock:!0,text:"Vui lòng đợi trong giây lát ...",background:"rgba(0, 0, 0, 0.7)"});if(await this.makeExam(1),await e.close(),this.notErrorMakeExam){this.flagSubmitted=!0;let{uuid:n}=y.getTestSchedule();this.timeTest=0,await this.$router.push({path:"/information",replace:!0}),y.deleteDataTimeInLocal(n);return}this.$notify.error({title:"Lỗi",message:"Bạn chưa nộp được bài vui lòng thử lại"})},handleFinished(){this.currentSection.type==k?this.handleFinishedTestGeneral():this.handleFinishedTestIelts()},timeOut(){},makeExam(e){let n={type:"ielts",test_input_schedule_id:this.testSchedule.id,step:e,answers:this.studentIDAndAnswer};return this.notErrorMakeExam=!1,I.postExam(n).then(t=>{var u,i;t.error||(this.correctAnswer=(i=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:i.right_answer,this.notErrorMakeExam=!0)}).catch(t=>t==null?void 0:t.response)},getDataPause(){return I.getPauseTest(this.testSchedule.id).then(e=>{this.data=e.data.data.answer_provisional,this.timeTest=new Date().getTime()/1e3+P(e.data.data.time_pause,"HH:mm:ss").diff(P().startOf("day"),"seconds"),localStorage.removeItem("statusGeneral")})}},computed:{...ee($,{dataPlacementsTest:"dataPlacementsTest"}),currentSection(){return this.data.length>this.page?this.data[this.page]:null},allQuestions(){return this.currentSection==null?[]:this.currentSection.groupQuestions.map(e=>e.questions).reduce((e,n)=>e.concat(n))},allQuestionTest(){var e;return(e=this.data.map(n=>{var t;return(t=n.groupQuestions)==null?void 0:t.map(u=>u.questions).reduce((u,i)=>u.concat(i))}))==null?void 0:e.reduce((n,t)=>n.concat(t))},studentIDAndAnswer(){return this.allQuestionTest.map(e=>({id:e.idQuestion,answers:e.userAnswer?[e.userAnswer]:e.userAnswers}))},isStepGeneral(){var e;return((e=this.data)==null?void 0:e.find(n=>n.type==k))!=null}}},vs={class:"bg-white h-screen"},Ps={key:0,class:"flex mt-1 px-5 w-screen overflow-x-auto h-fit"},Is={key:1,class:"bg-white absolute left-0 right-0 bottom-0 top-[200px] lg:top-[150px] overflow-auto pb-5"},Ss={key:0};function ks(e,n,t,u,i,s){const a=x("HeaderContent"),c=x("ButtonExam"),h=x("VocabularyTest"),_=x("listen-test"),m=x("write-test"),D=x("reading-test"),S=x("modal-confirm-continue"),v=x("modal-display-results");return o(),r(f,null,[l("div",vs,[A(a,{class:"h-[160px] lg:h-[100px]",onNextPage:s.nextPage,onBackPage:s.backPage,page:i.page,data:i.data,onTimeOut:s.timeOut,timeTest:i.timeTest,isStepGeneral:s.isStepGeneral},null,8,["onNextPage","onBackPage","page","data","onTimeOut","timeTest","isStepGeneral"]),s.currentSection.groupQuestions&&s.allQuestions?(o(),r("div",Ps,[A(c,{questions:s.allQuestions},null,8,["questions"])])):d("",!0),s.currentSection?(o(),r("div",Is,[s.currentSection.type==i.TYPE_GENERAL?(o(),w(h,{key:0,data:s.currentSection},null,8,["data"])):d("",!0),s.currentSection.type==i.TYPE_LISTENING?(o(),w(_,{key:1,data:s.currentSection},null,8,["data"])):d("",!0),s.currentSection.type==i.TYPE_WRITING?(o(),w(m,{key:2,data:s.currentSection},null,8,["data"])):d("",!0),s.currentSection.type==i.TYPE_READING?(o(),w(D,{key:3,data:s.currentSection},null,8,["data"])):d("",!0)])):d("",!0)]),s.currentSection?(o(),r("div",Ss,[A(S,{visible:i.visibleConfirmContinue,onClose:n[0]||(n[0]=Qs=>i.visibleConfirmContinue=!1),page:i.page,data:i.data,onContinue:s.confirmContinue},null,8,["visible","page","data","onContinue"]),A(v,{visible:i.visibleDisplayResult,correctAnswer:i.correctAnswer,countQuestion:this.allQuestionTest.length},null,8,["visible","correctAnswer","countQuestion"])])):d("",!0)],64)}const Ls=g(bs,[["render",ks],["__scopeId","data-v-21c70560"]]);export{Ls as default};
